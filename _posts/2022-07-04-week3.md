---
layout: post
title: Week 3
---

For the third week of my the project, I continued to comiple and install AFL++ and InvsCov. 
- I learned how to build a program to prepare for use with AFL++:
    "make CC=~/AFLplusplus/afl-clang-fast CXX=~/AFLplusplus/afl-clang-fast++ LD=~/AFLplusplus/afl-clang-fast". 
- To run autotrace with AFL++: 
  - create a fuzz directory under autotrace-0.31.1 and put autotrace_cov (a copy of autotrace binary) in fuzz and a trace01.bmp file under fuzz/in. 
  - run autotrace with AFL++ under the fuzz directory using "~/code/AFLplusplus/afl-fuzz -i in/ -o out -m none -d -- ./autotrace_cov @@“

In this process, I ran into issues building the program, autotrace itself:

meaghan@denali:~/autotra	ce-0.31.1/autotrace-0.31.1$ make clean all
[!] WARNING: You are using outdated instrumentation, install LLVM and/or gcc-plugin and use afl-clang-fast/afl-clang-lto/afl-gcc-fast instead!
input-png.c: In function 'handle_warning':
input-png.c:45:47: error: dereferencing pointer to incomplete type 'png_struct' {aka 'struct png_struct_def'}
   45 |  at_exception_warning((at_exception_type *)png->error_ptr,
      |                                               ^~
input-png.c: In function 'read_png':
input-png.c:187:10: error: dereferencing pointer to incomplete type 'png_info' {aka 'struct png_info_def'}
  187 |  info_ptr->row_pointers = (png_bytepp)png_malloc(png_ptr,
      |          ^~
make[1]: *** [Makefile:1055: input-png.lo] Error 1
make[1]: Leaving directory '/home/meaghan/autotrace-0.31.1/autotrace-0.31.1'
make: *** [Makefile:913: all] Error 2

meaghan@denali:/autotrace-0.31.1/autotrace-0.31.1$ make CC=/AFLplusplus/afl-clang-fast CXX=/AFLplusplus/afl-clang-fast++ LD=~/AFLplusplus/afl-clang-fast
make  all-am
make[1]: Entering directory '/home/meaghan/autotrace-0.31.1/autotrace-0.31.1'
/bin/bash ./libtool --mode=compile /home/meaghan/AFLplusplus/afl-clang-fast -DHAVE_CONFIG_H -I. -I. -I.      -g -O2 -c -o input-png.lo `test -f input-png.c || echo './'`input-png.c
/home/meaghan/AFLplusplus/afl-clang-fast -DHAVE_CONFIG_H -I. -I. -I. -g -O2 -c input-png.c -o input-png.o
afl-cc++4.01a by Michal Zalewski, Laszlo Szekeres, Marc Heuse - mode: GCC-GCC
[!] WARNING: You are using outdated instrumentation, install LLVM and/or gcc-plugin and use afl-clang-fast/afl-clang-lto/afl-gcc-fast instead!
input-png.c: In function 'handle_warning':
input-png.c:45:47: error: dereferencing pointer to incomplete type 'png_struct' {aka 'struct png_struct_def'}
   45 |  at_exception_warning((at_exception_type *)png->error_ptr,
      |                                               ^~
input-png.c: In function 'read_png':
input-png.c:187:10: error: dereferencing pointer to incomplete type 'png_info' {aka 'struct png_info_def'}
  187 |  info_ptr->row_pointers = (png_bytepp)png_malloc(png_ptr,
      |          ^~
make[1]: *** [Makefile:1055: input-png.lo] Error 1
make[1]: Leaving directory '/home/meaghan/autotrace-0.31.1/autotrace-0.31.1'
make: *** [Makefile:913: all] Error 2


Separately, in compiling InvsCov, I was successful in downloading daikon and setting the environmental variables (as directed by daikon) in bashrc. 
Following the download of daikon, I was able to run "reconstruct-dump" but ran into an error when trying to run the "learn-invariabnts" command.

Professor Huang helped me work through all the above errors to get autotrace to run and InvsCov to compile. However, we stil ran into issues with the daikon.txt file not being updated, so we switched to a simpler program, "stack.c", to test ALF++.
